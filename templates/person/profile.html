{% extends 'person/base.html' %}
{% load user_session i18n future %}

{% block content %}

<div id="right-sidebar" class="profileside">
	<h1>Last Seen</h1>
	<p>{% if user.details.last_seen %}{{ user.details.last_seen|timesince }} ago{% else %}Never{% endif %}</p>

    <h1>Joined On</h1>
    <p>{{ user.date_joined }}<br/>{{ user.date_joined|timesince }} ago</p>

    <h1>Stats</h1>
    <table>
      <tr><th scope="col">{% trans "Profile Visits:" %}</th><td>{{ user.details.visits }}</td></tr>
      <tr><th scope="col">{% trans "Resource Views:" %}</th><td>{{ user.resources.views }}</td></tr>
      <tr><th scope="col">{% trans "Resource Downloads:" %}</th><td>{{ user.resources.downloads }}</td></tr>
    </table>

   {% if user == request.user %}

     <h1>Sessions</h1>
     <ol id="sessions">
     {% for session in user.sessions %}
         <li>
           <div class="OS {{ session.user_agent|device_id }} {{ session.user_agent|device_id:True }}" title="{{ session.user_agent|device }}">&nbsp;</div>
           <div class="BR {{ session.user_agent|browser_id }}" title="{{ session.user_agent|browser }}">&nbsp;</div>
           <span title="{{ session.ip }} / {{ session.last_activity|timesince }} ago">{{ session.ip|location }}</span>
         </li>
     {% endfor %}
     </ol>

     <div style="text-align: center;">
     <a id="editprofile" href="{% url "edit_profile" %}">{% trans "Edit My Profile" %}</a>
     </div>
   {% endif %}
</div>

{% if items or user == request.user %}
  <h1>InkSpaces</h1>

  {% include "resource/galleries.html" %}
{% endif %}


{% endblock %}
