{% extends 'resource/item.html' %}
{% load i18n %}

{% block "description" %}
 <div class="sideInfo">
   <h1>{% if item.category %}{{ item.category }}{% else %}Unpublished{% endif %}</h1>
    
   {% if not item.is_file %}
     <a class="link" href="{{ item.link }}"><img src="{{ STATIC_URL }}/images/link_to.svg" alt="Link" title="Follow Link (external site)"/></a>
   {% endif %}
   <dl>
     {% if item.is_file %}    
       {% if item.mime.is_image %}
         <dt>{% trans "Views" %}</dt><dd>{{ item.viewed }}</dd>
       {% endif %}
       {% if not item.mime.is_image or not item.license.nd %}
         <dt>{% trans "Downloads" %}</dt><dd>{{ item.downed }}</dd>
       {% endif %}
       <dt>{% trans "Liked" %}</dt><dd>{{ item.votes.likes.count }}</dd>
       <dt>{% trans "Size" %}</dt><dd>{{ item.download.size|filesizeformat }}</dd>
     {% else %}
       <dt>{% trans "Linked From" %}</dt><dd>{{ item.link_from }}</dd>
     {% endif %}
   </dl>

   {% if item.license %}
     <a class="license" href="{{ item.license.link }}"><img src="{{ item.license.icon.url }}" alt="{{ item.license }}" title="{% if item.owner %}Copyright Â© {{ item.years }} {{ item.user.name }}
{% endif %}{{ item.license }}"/></a>
   {% endif %}
 </div>   

  <div class="desc">
    <h2>{{ item.name }} <span class="by">{% trans "by" %} <a href="{{ item.user.get_absolute_url }}">{{ item.user.details }}</a></span></h2>
    <p>{{ item.desc|linebreaks }}</p>
  </div>

  {% if item.is_file %}
  <div class="buttonbar">
    {% if item.link %}
      <a href="{{ item.link }}" id="moreInfo" class="start{% if request.user.id == item.user.id %} end{% endif %}">{% trans "External Link" %}</a>
    {% endif %}
    {% if request.user.id and request.user != item.user %}
      {% if not vote.vote %}
        <form action="{% url "like" item.id "+" %}">
          <button id="like" class="end {% if not item.link %}start{% endif %}" >&nbsp;</button>
        </form>
      {% else %}
        <form action="{% url "like" item.id "-" %}">
          <button id="like" class="end {% if not item.link %}start{% endif %} active" type="submit">&nbsp;</button>
        </form>
      {% endif %}
    {% endif %}
    
    {% if item.mime.is_image %}
      <form action="{% url "view_resource" item.id %}">
          <button id="view" class="unique start end" type="submit">{% trans "Full size view" %}</button>
      </form>
    {% endif %}
    
    {% if not item.mime.is_image or not item.license.nd %}
      <form action="{% url "download_resource" item.id %}">
          <button id="download" class="unique start end" type="submit">{% trans "Download" %}</button>
      </form>
    {% endif %}

    <!--We'd have a copy to clipboard button here, but html5 doesn't have it yet-->

    {% if item.user == request.user %}
     <form action="{% url "edit_resource" item.id %}">
       <button id="editSide" class="start" type="submit">{% trans "Edit" %}</button>
     </form>
     {% with "delete_resource" as delurl %}
      {% include "resource/delete_button.html" %}
     {% endwith %}
    {% endif %}
  </div>
  {% endif %}

{% endblock %}
