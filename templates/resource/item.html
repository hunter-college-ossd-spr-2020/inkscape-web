{% extends 'base.html' %}
{% load i18n %}

{% block content %}

{% if item.is_file %}
  {% with item.outer as item %}

{% if item.is_image %}

<div class="imageitem">
  <div class="image">
    <a href="{% url "download_resource" item.id %}"><img src="{{ item.download.url }}"></a>
  </div>

  <div class="desc">
    <h2>{{ item.name }} <span class="by">{% trans "by" %} <a href="{% url "view_profile" item.user.id %}">{{ item.user.details }}</a></span></h2>
    <p>{{ item.desc }}Description of the image and the various things about it.</p>
  </div>

  <div class="side">
    {% if item.link %}
    <a href="{{ item.link }}">{% trans "More information" %}</a> |
    {% endif %}
  {% ifequal item.user request.user %}
    <a href="{% url "edit_resource" item.id %}">{% trans "Edit" %}</a> |
    <a href="{% url "delete_resource" item.id %}">{% trans "Delete" %}</a> |
  {% endifequal %}
    {% ifequal vote.vote 0 %}
      Liked!
    {% else %}
      <a href="{% url "like" item.id "+" %}">Like this Image</a>
    {% endifequal %} |

    {% ifequal vote.vote 1 %}
      Disliked!
    {% else %}
      <a href="{% url "like" item.id "-" %}">Dislike this Image</a>
    {% endifequal %}
  </div>

  <div>
   Category: {{ item.category }}
   <h2>Status</h2>
   Views: {{ item.viewed }}<br/>
   Downloads: {{ item.downed }}<br/>
   Liked: +{{ item.votes.likes.count }} / -{{ item.votes.dislikes.count }}<br/>
   Area: 1900x3400<br/>
   Size: 3.4 MB<br/>

   <a class="license" href="{{ item.outer.license.link }}"><img src="{{ item.outer.license.icon.url }}" title="{{ item.outer.license }}"/></a>
   
  </div>

</div>

{% else %}

<div class="preview">

{% if item.thumbnail %}
  <img src="{{ item.thumbnail.url }}"/>
{% endif %}

<p>{{ item.desc }}<br/>
{% if item.file %}<a href="{{ item.file.url }}">{% trans "Download" %}</a>{% endif %}
{% if item.source %}<a href="{{ item.source.url }}">{% trans "Download" %}</a> |{% endif %}
</p>

</div>

{% endif %}

  {% endwith %}
{% else %}
<!--URL Resource handling here.-->
{% endif %}


{% endblock %}
