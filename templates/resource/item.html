{% extends 'base.html' %}

{% load i18n comments extras %}

{% block content %}

 {% if form and form.non_field_errors %}
  <div class="errors">
    {{ form.non_field_errors }}
  </div>
 {% endif %}

  <h1 id='item-title'>
   {% block title %}
    {% if item %}
      {% if form %}{% trans "Edit" %} | {% endif %}{{ item.name }}
    {% elif paste %}
     {% trans "New Paste" %}
    {% else %}
     {% trans "Upload New Resource" %}
    {% endif %}
   {% endblock %}
  </h1>

 <div class="item{% if form %} edit{% endif %}">
 {% if not form and item.is_video %}
   <div class="image video">
    {% if item.video.type == "youtube" %}
      <iframe src="https://www.youtube.com/embed/{{ item.video.id }}" frameborder="0" allowfullscreen id="videoPlayer"></iframe>
    {% elif item.video.type == "vimeo" %}
      <iframe id="videoPlayer" src="https://player.vimeo.com/video/{{ item.video.id }}" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
    {% endif %}
  </div>
 {% elif item.is_file %}
    {% if item.mime.is_image %}
      <div class="image only">
        <a href="{% url "download_resource" item.id %}"><img src="{{ item.download.url }}" alt="{% trans "Image" %}"></a>
      </div>
    {% elif item.mime.is_text and item.media_x < 300 %}
      <div class="text" title="{{ item.media_type }}">{{ item.as_lines }}</div>
    {% else %}
      <div class="image file">
        <a href="{% url "download_resource" item.id %}"><img src="{{ item.icon }}" alt="{% trans "File Icon" %}"></a>
      </div>
    {% endif %}
  {% elif item %}
    <div class="image link">
      <a href="{{ item.link }}" title="{% trans "External Link" %}: {{ item }}">
      {% if item.thumbnail %}
        <img src="{{ item.icon }}" alt="{% trans "Item Image" %}"/>
      {% else %}
        <img src="{{ STATIC_URL }}images/link.svg" alt="{% trans "Item Link" %}"/>
      {% endif %}
      </a>
    </div>
  {% elif form %}
    <div class="image padding"></div>
  {% endif %}

  {% block "description" %}{% endblock %}
 </div>
{% endblock %}
