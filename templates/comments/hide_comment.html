{% extends "comments/base.html" %}

{% load i18n comments pile %}

{% block title %}{% trans "Review Flagged Comments" %}{% endblock %}

{% block content %}

<h1>{% trans "Hide Comment" %}</h1>

<div class="comments">  
  <div class="comment">
    <div class="details">
      <div class="title">
        {% url 'view_profile' comment.user.username as profile_url %}
        <a href="{{profile_url}}"><img class="userphoto" src="{% if comment.user.details.photo %}{{ comment.user.details.photo.url }}{% else %}{{ STATIC_URL }}images/photo.png{% endif %}"/></a>
        <div>
          {% url 'view_profile' comment.user.username as profile_url %}
          {% blocktrans with comment.user as user_name and comment.submit_date|timetag as comment_date and comment.get_content_object_url as the_url %}
            <a href="{{profile_url}}">{{user_name}}</a> wrote {{comment_date}} about <a href="{{ the_url }}">this</a>:
          {% endblocktrans %}
        </div>
      </div>  
      
      <div class="index"><a href="">#{{ comment_counter }}</a></div>
      <div class="flagcount">{{ comment.flags.count }}</div> 
      <div title='{% trans "Flags" %}' class="flag flagged"></div>
    </div>
          
    <div class="body">
      <div class="text"><p>{{ comment.comment|urlize|linebreaks }}</p></div>     
    </div> 
  </div>
  
  <div id="flaggers">
    <p>{% trans "This comment was reported by" %}:
      {% for flag in comment.flags.all %}{% url 'view_profile' flag.user.username as flagger_url %}<a href="{{ flagger_url }}">{{ flag.user.username }}</a>&nbsp;  {% endfor %}
    </p>
  </div>
  
  <form class="block" action='{% url "comments-delete"  comment.id %}' method="post">
  {% csrf_token %}
    <div class="comment">
      <div class="details">
        <div class="title">{% trans "Edit message to the person who made the comment" %}:</div>
      </div>
        
        <div class="body">
        
          <textarea name="message" id="message" cols="50" rows="25">Hi {{ comment.user.username }}!

The Inkscape Community Moderators noticed that someone reported your comment at 
https://www.inkscape.org{{ comment.get_content_object_url }} .
You wrote:

{{ comment.comment }}
          
In accordance with our Community Code of Conduct (https://www.inkscape.org/community/coc), we remove your comment, because 
INSERT REASON HERE.

As a user of this website, please adhere to our Code of Conduct and be considerate and courteous towards other users. 

Best regards,
Inkscape Community Moderators</textarea>
        </div>
        
        <div class="cfooter">
          <div class="buttonbar">           
            <label class="forcheckbox">{% trans "This needs the attention of an administrator" %}:<input type="checkbox" name="adminactionrequired"/></label>
            <a class="button" href='{% url "moderation" %}'>{% trans "Cancel" %}</a>
            <input type="hidden" name="next" value="{{ request.GET.next }}"/>
            <input type="submit" class="button" value='{% trans "Hide comment and send message" %}' />
          </div>
        </div>
    </div>
  </form> 
  
</div>
{% endblock %}

<!--todo: send message to commentor, to admin, Adding a breadcrumb navigation would be nice. -->