{% load i18n comments %}

<div>
  {% get_comment_count for item as comment_count %}
    
  <p>
    
    {% if comment_count == 0 %}
      {% trans "No comments yet." %}
    {% else %}
      {% blocktrans count counter=comment_count %}
        There is only one comment.
      {% plural %}
        There are {{ counter }} comments.
      {% endblocktrans %}
    {% endif %}
  </p>
  {% get_comment_list for item as comment_list %}
  {% for comment in comment_list %}
    <div class="comment">
      <div class="details">
        <div class="title">
          <img class="userphoto" src="{% if comment.user.details.photo %}{{ comment.user.details.photo.url }}{% else %}{{ STATIC_URL }}images/photo.png{% endif %}"/>
          <div>
            {% url 'view_profile' comment.user.username as profile_url %}
            {% blocktrans with comment.user as user_name and comment.submit_date as comment_date %}
              <a href="{{profile_url}}">{{user_name}}</a> wrote on {{comment_date}}:
            {% endblocktrans %}
          </div>
        </div>
        <div class="index"><a href=""> #{{ forloop.counter0|add:"1" }}</a></div>
      </div>
      <div class="body">
        <div class="text"><p>{{comment.comment}}</p></div>
      </div>
    </div>
  {% endfor %}
</div>

